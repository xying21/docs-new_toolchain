<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CPNK56S8G3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CPNK56S8G3",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Nervos CKB" href="/develop/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&display=swap">
<script src="/js/extra.js"></script><title data-react-helmet="true">Cell | Nervos CKB</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://xying21.github.com/develop/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image" content="https://xying21.github.com/develop/img/undraw_online.svg"><meta data-react-helmet="true" property="og:url" content="https://xying21.github.com/develop/docs/reference/cell"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Cell | Nervos CKB"><meta data-react-helmet="true" name="description" content="Nervos CKB (Common Knowledge Base) is a layer 1 blockchain, a decentralized and secure layer that provides common knowledge custody for the network.  Common knowledge refers to states that are agreed via global consensus."><meta data-react-helmet="true" property="og:description" content="Nervos CKB (Common Knowledge Base) is a layer 1 blockchain, a decentralized and secure layer that provides common knowledge custody for the network.  Common knowledge refers to states that are agreed via global consensus."><link data-react-helmet="true" rel="icon" href="/develop/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://xying21.github.com/develop/docs/reference/cell"><link data-react-helmet="true" rel="alternate" href="https://xying21.github.com/develop/docs/reference/cell" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://xying21.github.com/develop/docs/reference/cell" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/develop/assets/css/styles.3d7242b2.css">
<link rel="preload" href="/develop/assets/js/runtime~main.9a7d223e.js" as="script">
<link rel="preload" href="/develop/assets/js/main.b81bb0ca.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/develop/"><div class="navbar__logo"><img src="/develop/img/logo.png" alt="Nervos CKB" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/develop/img/logo.png" alt="Nervos CKB" class="themedImage_TMUO themedImage--dark_uzRr"></div></a><a class="navbar__item navbar__link" href="/develop/docs/basics/introduction">Basics</a><a class="navbar__item navbar__link" href="/develop/docs/reference/introduction">Reference</a><a class="navbar__item navbar__link" href="/develop/docs/labs/introduction">Labs</a><a class="navbar__item navbar__link" href="/develop/docs/integrate/introduction">Integrate</a><a class="navbar__item navbar__link" href="/develop/docs/essays/introduction">Essays</a><a class="navbar__item navbar__link" href="/develop/docs/develop/developer-materials-guide">Develop</a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/develop/docs/reference/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/develop/docs/reference/cell">Cell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/develop/docs/reference/script">Script</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/develop/docs/reference/transaction">Transaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/develop/docs/reference/rpc">JSON-RPC</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cell</h1></header><p>Nervos CKB (Common Knowledge Base) is a layer 1 blockchain, a decentralized and secure layer that provides common knowledge custody for the network.  Common knowledge refers to <strong>states</strong> that are agreed via global consensus.</p><p><strong>Cells are the primary state units</strong> in CKB and assets owned by users. They must follow associated validation rules specified by scripts. In Bitcoin, money is the typical common knowledge stored in the Bitcoin ledger. Nervos CKB, however, takes one step further to store arbitrary common knowledge. We starts from Bitcoin&#x27;s general architecture, and creates the <a href="https://medium.com/nervosnetwork/https-medium-com-nervosnetwork-cell-model-7323fca57571" target="_blank" rel="noopener noreferrer">Cell Model</a> by generalizing from the UTXO model, while at the same time retaining the consistency and simplicity of Bitcoin.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="data-structure">Data Structure<a aria-hidden="true" class="hash-link" href="#data-structure" title="Direct link to heading">â€‹</a></h2><p><strong>Example:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;capacity&quot;: &quot;0x19995d0ccf&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;lock&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;code_hash&quot;: &quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;args&quot;: &quot;0x0a486fb8f6fe60f76f001d6372da41be91172259&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;hash_type&quot;: &quot;type&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: null</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A Cell has three fieldsï¼š</p><ul><li><code>capacity</code>: Capacity serves 2 purposes: on one hand, it represents the amount of CKB tokens stored in the cell, on the other hand, it also sets the limit on how much information the cell can store. The basic unit for capacity is <code>shannon</code>, a bigger unit <code>CKByte</code>, or just <code>CKB</code> is also used. 1 CKB equals <code>10**8</code> shannons, 1 CKB also means the cell can store 1 byte of information. See below for how to calculate the total information size of a cell.</li><li><code>lock script</code>: A script used to guard the cell: when the specified cell is used as an input cell in a transaction, the lock script included in a cell will be executed. The transaction will be rejected when the lock script fails in execution. One typical use case for lock script, is to represent the ownership of a cell, meaning a signature verification phase is usually included in the cell.</li><li><code>type script</code>: A script used to validate cell structure. The type script of a cell will be executed both when the cell is included as an input cell, as well as when the cell is created as an output cell. Due to this nature, type script is typically used to validate dapp logic, such as creating UDTs.</li></ul><p>Each cell must have a lock script, while type script is optional, and can be omitted. Please refer to <a href="/develop/docs/reference/script">Script</a> for the actual format of lock and type script.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cell-data">Cell data<a aria-hidden="true" class="hash-link" href="#cell-data" title="Direct link to heading">â€‹</a></h3><p>In addition to the above fields, each cell also contains a cell data field. Cell data is just a series of unformatted binary data. Depending on each dapp, anything could be stored in the cell data part:</p><ul><li>Script code as explained in <a href="/develop/docs/reference/script">Script</a>.</li><li>Token amount for User Defined Token cells.</li><li>Latest game stats for an on-chain fantasy game.</li></ul><p>For future potential, cell data is not stored directly in a cell. It is kept directly in the <a href="/develop/docs/reference/transaction#data-structure">Transaction</a>. You might find a field named <code>outputs_data</code> in each transaction. This array should have the same length with <code>outputs</code>. At each index location, the corresponding cell data could be located for each created output cell in the transaction. Conceptually, we still consider cell data as part of each output cell.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cell-information-size-calculation">Cell information size calculation<a aria-hidden="true" class="hash-link" href="#cell-information-size-calculation" title="Direct link to heading">â€‹</a></h3><p>Each cell on Nervos CKB, must not have a lower capacity than the total size of information stored in the cell. The size of information for a cell is calculated as the sum of the following fields:</p><ol><li>8 bytes for cell capacity field.</li><li>32 bytes for code hash in lock script.</li><li>1 byte for hash type in lock script.</li><li>Actual bytes of args field in lock script.</li><li>If type script is present, 32 bytes for code hash in type script.</li><li>If type script is present, 1 byte for hash type in type script.</li><li>If type script is present, actual bytes of args field in type script.</li><li>Actual bytes of cell data.</li></ol><p>By summing up all the above fields, we get the total size of information a cell needs. Cell capacity, when measured in <code>CKBytes</code>, respresents the maximum size of information that can be held, meaning a valid cell must ensure the CKBytes stored in capacity equal or is larger than the total size of information.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="live-cell">Live Cell<a aria-hidden="true" class="hash-link" href="#live-cell" title="Direct link to heading">â€‹</a></h2><p>Live cell refers to an unspent cell in CKB. It is similar to the concept of <a href="https://en.wikipedia.org/wiki/Unspent_transaction_output" target="_blank" rel="noopener noreferrer">UTXO</a> in Bitcoin&#x27;s terminology. The full set of live cells in CKB, is consider the full state of CKB at that particular point. Any transaction on CKB would consume some cells that were live cells just at the point before it is committed, and created new cells that are considered live cells after it is committed.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="index-query-assemble-pattern">Index-Query-Assemble Pattern<a aria-hidden="true" class="hash-link" href="#index-query-assemble-pattern" title="Direct link to heading">â€‹</a></h2><p>Nervos CKB is designed based on the concept of cells. A transaction, at its core, really just consumes some cells, and create another set of cells. As a result, the ability to locate and transform cells, plays a critical role in building any CKB dapps, which leads to the <code>index-query-assemble</code> pattern:</p><ul><li>Index: when a new block is committed to CKB, a dapp should be able to index relevant cells to its own storage for latter usage.</li><li>Query: when a user action is requested, cells satisfying certain criteria will be queried from the dapp storage.</li><li>Assemble: based on queried cells, a new transaction would be assembled to fulfill user requests.</li></ul><p>We believe all CKB dapps can be decomposed into individual actions following this pattern. Here are some examples:</p><ul><li>In a normal CKB wallet, cells should be indexed based on lock scripts. A transfer action would first query cells from the sender, and assemble a transaction which transfer CKBytes to the receiver.</li><li>A NervosDAO manager might index only cells related to NervosDAO. A user might then pick a NervosDAO cell and perform withdraw action, even though there is only one cell related, we can still view it as cells queried from the NervosDAO manager, and a transaction will also be assembled which performs the actual withdraw action.</li><li>A state based dapp might choose to store the latest state in a CKB cell. The dapp will still need to track the latest live cell, which can also be viewed as an indexing operation, any action on the state will result in the latest live cell being queried, assembled into a transaction, then accepted by CKB with a new output cell containing the updated state.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="tools">Tools<a aria-hidden="true" class="hash-link" href="#tools" title="Direct link to heading">â€‹</a></h3><p>Indexing &amp; querying plays a central role in any CKB dapps. In most cases, you don&#x27;t have to build an indexer from scratch. There are several existing tools one can leverage to fulfill the job:</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="lumos">lumos<a aria-hidden="true" class="hash-link" href="#lumos" title="Direct link to heading">â€‹</a></h4><p>Our dapp framework, <a href="https://github.com/nervosnetwork/lumos" target="_blank" rel="noopener noreferrer">lumos</a> already contains a ready-to-use indexer. When you are using lumos, it is very likely the indexer is already setup for you to use. Please refer to our labs for how to setup lumos.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ckb-indexer">ckb-indexer<a aria-hidden="true" class="hash-link" href="#ckb-indexer" title="Direct link to heading">â€‹</a></h4><p>A standalone <a href="https://github.com/quake/ckb-indexer" target="_blank" rel="noopener noreferrer">ckb-indexer</a> also handles the job of indexing cells. It provides an RPC mechanism you can use to query for relevant cells. Please refer to the documentation of ckb-indexer for more details.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="perkins-tent">perkins-tent<a aria-hidden="true" class="hash-link" href="#perkins-tent" title="Direct link to heading">â€‹</a></h4><p>If you are looking at a one-stop solution, <a href="https://github.com/xxuejie/perkins-tent" target="_blank" rel="noopener noreferrer">Perkins&#x27; Tent</a> provides a single docker image that starts both CKB and ckb-indexer in one dockerisntance. With a single command, you should be able to start a CKB instance and be ready to use the enclosed ckb-indexer for querying tasks.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/develop/docs/reference/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/develop/docs/reference/script"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Script<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#data-structure" class="table-of-contents__link toc-highlight">Data Structure</a><ul><li><a href="#cell-data" class="table-of-contents__link toc-highlight">Cell data</a></li><li><a href="#cell-information-size-calculation" class="table-of-contents__link toc-highlight">Cell information size calculation</a></li></ul></li><li><a href="#live-cell" class="table-of-contents__link toc-highlight">Live Cell</a></li><li><a href="#index-query-assemble-pattern" class="table-of-contents__link toc-highlight">Index-Query-Assemble Pattern</a><ul><li><a href="#tools" class="table-of-contents__link toc-highlight">Tools</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Foundation</div><ul class="footer__items"><li class="footer__item"><a href="https://www.nervos.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Us</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developer</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0002-ckb/0002-ckb.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Whitepaper</a></li><li class="footer__item"><a href="https://github.com/nervosnetwork/rfcs" target="_blank" rel="noopener noreferrer" class="footer__link-item">RFCs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/AqGTUE9" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://talk.nervos.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://www.reddit.com/r/NervosNetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://t.me/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://medium.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCONuJGdMzUY0Y6jrPBOzH7A" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021  Nervos Foundation. All Rights Reserved.</div></div></div></footer></div>
<script src="/develop/assets/js/runtime~main.9a7d223e.js"></script>
<script src="/develop/assets/js/main.b81bb0ca.js"></script>
</body>
</html>