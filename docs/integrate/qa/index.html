<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CPNK56S8G3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CPNK56S8G3",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Nervos CKB" href="/develop/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&display=swap">
<script src="/js/extra.js"></script><title data-react-helmet="true">Q&amp;A | For Wallets/Exchanges/Mining Pools | Nervos CKB</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://xying21.github.com/develop/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image" content="https://xying21.github.com/develop/img/undraw_online.svg"><meta data-react-helmet="true" property="og:url" content="https://xying21.github.com/develop/docs/integrate/qa"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Q&amp;A | For Wallets/Exchanges/Mining Pools | Nervos CKB"><meta data-react-helmet="true" name="description" content="External wallets, exchanges and mining pools typically face unique and different challenges when they integrate CKB into their system. This page will provide Q&amp;A for wallets, exchanges and mining pools to integrate CKB. We are woking on detailed guides and helpful tips now, please be patient for a while."><meta data-react-helmet="true" property="og:description" content="External wallets, exchanges and mining pools typically face unique and different challenges when they integrate CKB into their system. This page will provide Q&amp;A for wallets, exchanges and mining pools to integrate CKB. We are woking on detailed guides and helpful tips now, please be patient for a while."><link data-react-helmet="true" rel="icon" href="/develop/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://xying21.github.com/develop/docs/integrate/qa"><link data-react-helmet="true" rel="alternate" href="https://xying21.github.com/develop/docs/integrate/qa" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://xying21.github.com/develop/docs/integrate/qa" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/develop/assets/css/styles.3d7242b2.css">
<link rel="preload" href="/develop/assets/js/runtime~main.9a7d223e.js" as="script">
<link rel="preload" href="/develop/assets/js/main.b81bb0ca.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/develop/"><div class="navbar__logo"><img src="/develop/img/logo.png" alt="Nervos CKB" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/develop/img/logo.png" alt="Nervos CKB" class="themedImage_TMUO themedImage--dark_uzRr"></div></a><a class="navbar__item navbar__link" href="/develop/docs/basics/introduction">Basics</a><a class="navbar__item navbar__link" href="/develop/docs/reference/introduction">Reference</a><a class="navbar__item navbar__link" href="/develop/docs/labs/introduction">Labs</a><a class="navbar__item navbar__link" href="/develop/docs/integrate/introduction">Integrate</a><a class="navbar__item navbar__link" href="/develop/docs/essays/introduction">Essays</a><a class="navbar__item navbar__link" href="/develop/docs/develop/developer-materials-guide">Develop</a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/develop/docs/integrate/introduction">Nervos CKB Mainnet - Integration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/develop/docs/integrate/qa">Q&amp;A | For Wallets/Exchanges/Mining Pools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/develop/docs/integrate/sdk">Nervos CKB SDK</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="theme-doc-markdown markdown"><header><h1>Q&amp;A | For Wallets/Exchanges/Mining Pools</h1></header><p>External wallets, exchanges and mining pools typically face unique and different challenges when they integrate CKB into their system. This page will provide Q&amp;A for wallets, exchanges and mining pools to integrate CKB. We are woking on detailed guides and helpful tips now, please be patient for a while.</p><p>The following three questions are related to transaction processing, you may refer to <a href="https://nervosnetwork.github.io/docs-new/docs/reference/transaction" target="_blank" rel="noopener noreferrer">Transaction</a> for more details.</p><p><strong>Q:</strong>How do we use the two fields <code>code_hash</code> and <code>hash_type</code> in the lock script of output cells ?</p><p><strong>A:</strong> When the output cells are unlocked, CKB-VM should load the corresponding contracts by using <code>code_hash</code> and <code>hash_type</code>.It is recommended to refer to <a href="https://nervosnetwork.github.io/docs-new/docs/reference/script#data-structure" target="_blank" rel="noopener noreferrer">Script</a> for more details.</p><ul><li><code>code_hash</code>: A hash denoting which script in the transaction to execute. For space consideration, the actual script code is kept in the cell data part of a <a href="https://nervosnetwork.github.io/docs-new/docs/reference/cell#live-cell" target="_blank" rel="noopener noreferrer">live cell</a> on CKB. The current transaction should reference the live cell using a <a href="https://nervosnetwork.github.io/docs-new/docs/reference/transaction" target="_blank" rel="noopener noreferrer">cell dep</a> so as to locate and execute the script.</li><li><code>hash_type</code>: The interpretation of <code>code_hash</code> when looking for script code to run from cell deps.<ul><li>If <code>hash_type</code> contains <code>data</code>, <code>code_hash</code> should match the blake2b hash of data(which is also the actual script code) in a dep cell;</li><li>If <code>hash_type</code> contains <code>type</code>, <code>code_hash</code> should instead match the blake2b hash of type script contained by a a dep cell. Note CKB will throw a validation error when a) we are locating a script code using <code>type</code> as <code>hash_type</code>; and b) more than one cell referenced by cell deps contains the specified hash of type script.</li></ul></li></ul><p><strong>Q:</strong>Can we hardcode the  <code>code_hash</code> , <code>hash_type</code> and the corresponding <code>cell_dep</code> of two scripts? Are they the same on Testnet as on Mainnetï¼Ÿ</p><p><strong>A:</strong> <code>code_hash</code> and <code>hash_type</code> can be hardcoded and they are the same on Testnet as on Mainnet. <code>cell_dep</code>  is not the same on the Testnet as on Manniet. But they are all get from the fixed position of the genesis block. The single signature is from the second transaction of the genesis block and the multisignature is from the second output cell, once the genesis block is confirmed, the value is fixed</p><p><strong>Q:</strong> How do we use  <code>Type</code> in the outputs?</p><p><strong>A:</strong> <code>Type</code> can be used in many ways, such as UDT(User Defined Token). We already have an RFC: <a href="https://talk.nervos.org/t/rfc-simple-udt-draft-spec/4333" target="_blank" rel="noopener noreferrer">Simple UDT Draft Spec</a> you may refer it for more details, but currently there isnâ€™t a standard equivalent of ERC20 in Ethereum community, will have to wait until the community has developed a best practice. For wallets or exchanges, you may handle the transactions with <code>Type = null</code> If the standard is generated, you also need filter transactions by whitelist and leave transactions with <code>Type = null</code> in the future.</p><p><strong>Q:</strong> What is the relationship between the short address, long address and lock script?</p><p><strong>A:</strong>  The long address and lock Script correspond one to one. All long addresses can be converted into a lock script and vice versa. All short addresses can be converted into long addresses, but the reverse is not necessarily true. CKB have provided single signature transfer and multisignature transfer scripts by default. Also you may refer to RFC:<a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0021-ckb-address-format/0021-ckb-address-format.md" target="_blank" rel="noopener noreferrer">CKB Address Format</a> for more details.</p><p><strong>Q:</strong> Are there some test cases for address resolution and generation in other programming languages?</p><p><strong>A:</strong> Yes, you may refer to the test cases of ckb-sdk-javaï¼š
<a href="https://github.com/nervosnetwork/ckb-sdk-java/blob/develop/ckb/src/test/java/utils/AddressParserTest.java" target="_blank" rel="noopener noreferrer">https://github.com/nervosnetwork/ckb-sdk-java/blob/develop/ckb/src/test/java/utils/AddressParserTest.java</a>
<a href="https://github.com/nervosnetwork/ckb-sdk-java/blob/develop/ckb/src/test/java/utils/AddressGeneratorTest.java" target="_blank" rel="noopener noreferrer">https://github.com/nervosnetwork/ckb-sdk-java/blob/develop/ckb/src/test/java/utils/AddressGeneratorTest.java</a></p><p><strong>Q:</strong> Why is it that the minimum transfer amount cannot be less than 61 CKB?</p><p><strong>A:</strong> A cell is used to represent a balance on-chain, and one must hold 1 CKB for every 1 byte of space that the cell occupies. The data in every cell is broken down into four fields: capacity, lock script, type script, and data. Capacity and lock script are required, and type script and data are optional. For more detailed information about the structure of a cell, refer to the <a href="https://nervosnetwork.github.io/docs-new/docs/reference/cell" target="_blank" rel="noopener noreferrer">cell</a> reference page.</p><p>The most common basic cell is one that represent a CKB balance. Often this will use the default lock script, which is used for short CKB addresses supported by most wallets. A basic cell like this does not require a type script or any additional data. The fields of this cell are as follows:</p><ul><li>The <code>capacity</code> field is used to hold the number of CKB balance in the cell. This is a u64, which takes 8 bytes.</li><li>The <code>lock script</code> field is <code>Script</code> type. This inclues a <code>code_hash</code> that is 32 bytes, a <code>hash_type</code> that is 1 byte, and an <code>args</code> field that is 20 bytes.</li><li>The <code>type script</code> field is optional and is not used for this cell.</li><li>The <code>data</code> field is optional and is not used for this cell.</li></ul><p>When you add these up, you get 61 bytes: 8 + 32 + 1 + 20 + 0 + 0 = 61.</p><p>This is why the minimum transfer is 61 CKB, because 61 bytes are required to represent this information on-chain.</p><p>While 61 CKB is the minimum, in many cases it is recommended that 62 CKB be sent as the minimum. This is because 61 CKB is the absolute minimum that is required for the cell to exist, and if there are no extra available, then transaction fees cannot be paid from this cell, if needed.</p><p><strong>Q:</strong> If I have 100 CKB in my address and transfer 61 CKB, the balance remaining (39 CKB) isnâ€™t enough to create a change cell. How should I handle this?</p><p><strong>A:</strong> There are several ways that this can be handled.</p><p>The most simple method is to inform users that they have an insufficient balance, and prompt them to add more CKB as needed. This requires only basic processing logic to be implemented.</p><p>A second option is to tranfer the entire balance of 100 CKB (minus tx fees) so that there is nothing left. If the balance is exactly 0 CKB, then the cell can be consumed and removed from the state completely. This works well if the user wants to withdraw their total balance.</p><p>A third option is to use a more specialized lock script that supports the &quot;Anyone Can Pay&quot; (ACP) protocol. When both the sender and receiver are setup to use ACP, a balance of any size can be transferred between two parties without the sender having to include any CKB for the cell itself. For more information on ACP, please see the <a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0026-anyone-can-pay/0026-anyone-can-pay.md" target="_blank" rel="noopener noreferrer">Anyone Can Pay RFC</a>.</p><p><strong>Q:</strong> Can <code>output_data</code> be used as exchange entry certificate?</p><p><strong>A:</strong> CKB Programming model is a generalized version of the UTXO model.It is recommended to generate different account addresses for each user instead of sharing one address and distinguish them by memo.</p><p><strong>Q:</strong> Are there APIs similar to Bitcoin Walletâ€™s APIs to manage CKB?</p><p><strong>A:</strong> If you already have UTXO management framework for Bitcoin, you may continue to use it and scan every block of CKB blockchain.If you donâ€™t, you may refer to <a href="https://nervosnetwork.github.io/docs-new/docs/reference/cell#tools" target="_blank" rel="noopener noreferrer">Cell</a> and use the tools to index or query.</p><p><strong>Q:</strong> Which APIs need to be invoked if I want to get transaction lists, transaction balance, initiate transactions and etc.</p><p><strong>A:</strong> You may refer to our <a href="https://nervosnetwork.github.io/docs-new/docs/reference/rpc" target="_blank" rel="noopener noreferrer">JSON RPC</a> document.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/develop/docs/integrate/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Nervos CKB Mainnet - Integration Guide</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/develop/docs/integrate/sdk"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Nervos CKB SDK<!-- --> Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Foundation</div><ul class="footer__items"><li class="footer__item"><a href="https://www.nervos.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Us</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developer</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0002-ckb/0002-ckb.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Whitepaper</a></li><li class="footer__item"><a href="https://github.com/nervosnetwork/rfcs" target="_blank" rel="noopener noreferrer" class="footer__link-item">RFCs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/AqGTUE9" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://talk.nervos.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://www.reddit.com/r/NervosNetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://t.me/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://medium.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCONuJGdMzUY0Y6jrPBOzH7A" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021  Nervos Foundation. All Rights Reserved.</div></div></div></footer></div>
<script src="/develop/assets/js/runtime~main.9a7d223e.js"></script>
<script src="/develop/assets/js/main.b81bb0ca.js"></script>
</body>
</html>